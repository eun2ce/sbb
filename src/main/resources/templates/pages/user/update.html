<html layout:decorate="~{common/layouts/defaultLayout}" xmlns:th="http://www.thymeleaf.org">
<div layout:fragment="content" class="container my-3">
  <div class="card text-center">
    <div class="card-header"><h4>비밀번호 변경</h4></div>
    <div class="card-body">
      <form th:action="@{/user/update}" th:object="${userUpdateForm}" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <div th:replace="~{common/fragment/errors :: formErrorsFragment}"></div>

        <div class="form-group row mb-3">
          <label for="username" class="col-sm-2 col-form-label">사용자 ID</label>
          <div class="col-sm-10">
            <input type="text" th:value="${username}" id="username" class="form-control" readonly>
          </div>
        </div>

        <div class="form-group row mb-3">
          <label for="email" class="col-sm-2 col-form-label">이메일</label>
          <div class="col-sm-10">
            <input type="text" th:value="${email}" class="form-control" id="email" readonly>
          </div>
        </div>

        <div class="form-group row mb-3">
          <label for="originPassword" class="col-sm-2 col-form-label">현재 비밀번호</label>
          <div class="col-sm-10">
            <input type="password" class="form-control" id="originPassword"
                   th:field="*{originPassword}"
                   placeholder="현재 비밀번호를 입력하세요.">
          </div>
        </div>

        <div class="form-group row mb-3">
          <label for="newPassword1" class="col-sm-2 col-form-label">새 비밀번호</label>
          <div class="col-sm-10">
            <input type="password" class="form-control" id="newPassword1" th:field="*{newPassword1}"
                   placeholder="새 비밀번호를 입력하세요.">
          </div>
        </div>

        <div class="form-group row mb-3">
          <label for="newPassword2" class="col-sm-2 col-form-label">새 비밀번호 확인</label>
          <div class="col-sm-10">
            <input type="password" class="form-control" id="newPassword2" th:field="*{newPassword2}"
                   placeholder="새 비밀번호를 한번 더 입력하세요.">
          </div>
        </div>
        <button type="submit" class="btn btn-primary">비밀번호 변경하기</button>
      </form>
    </div>
  </div>
  <!-- 비밀번호 변경 성공 시 alert 창 띄우기 -->
  <script th:if="${passwordChanged}">
    alert('비밀번호가 성공적으로 변경되었습니다.');
    window.location.href="/";
  </script>
</div>
</html>